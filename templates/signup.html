<!DOCTYPE HTML>
<!--
	Spectral by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>회원가입 - DrunkGuard</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="{{ url_for('static', filename='assets/css/main.css') }}" />
		<noscript><link rel="stylesheet" href="{{ url_for('static', filename='assets/css/noscript.css') }}" /></noscript>
		<style>
			.signup-container {
				max-width: 28rem;
				margin: 0 auto;
				padding: 2rem;
				background: rgba(255, 255, 255, 0.05);
				border-radius: 10px;
				box-shadow: 0 4px 20px rgba(0,0,0,0.3);
				backdrop-filter: blur(10px);
			}
			
			.form-group {
				margin-bottom: 1.5rem;
			}
			
			.form-group label {
				display: block;
				margin-bottom: 0.5rem;
				font-weight: bold;
				color: #fff;
			}
			
			.form-group input {
				width: 100%;
				padding: 0.75rem;
				border-radius: 5px;
				border: 2px solid rgba(255,255,255,0.6);
				background: rgba(255,255,255,0.3);
				color: #fff !important;
				font-weight: 600;
				font-size: 1.1rem;
				text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
			}
			
			.form-group input:focus {
				outline: none;
				border-color: rgba(255,255,255,0.9);
				background: rgba(255,255,255,0.4);
			}
			
			.form-group input::placeholder {
				color: rgba(255,255,255,0.8) !important;
				font-weight: 500;
				text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
			}
			
			.signup-btn {
				width: 100%;
				padding: 0.75rem;
				background: #3498db;
				color: white;
				border: none;
				border-radius: 5px;
				font-size: 1.1rem;
				font-weight: 600;
				cursor: pointer;
				transition: background 0.3s;
				text-align: center;
				display: flex;
				align-items: center;
				justify-content: center;
				text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
			}
			
			.signup-btn:hover {
				background: #2980b9;
			}
			
			.actions {
				text-align: center;
			}
			
			.actions li {
				display: block;
				margin: 0;
			}
			
			.login-link {
				text-align: center;
				margin-top: 2rem;
				padding: 1rem;
				background: rgba(255,255,255,0.1);
				border-radius: 8px;
				border: 1px solid rgba(255,255,255,0.2);
			}
			
			.login-link a {
				color: #fff !important;
				text-decoration: none;
				font-weight: 600;
				font-size: 1.1rem;
				display: inline-block;
				padding: 0.5rem 1rem;
				background: rgba(255,255,255,0.2);
				border-radius: 5px;
				transition: all 0.3s ease;
				border: 1px solid rgba(255,255,255,0.3);
			}
			
			.login-link a:hover {
				background: rgba(255,255,255,0.3);
				transform: translateY(-2px);
				box-shadow: 0 4px 8px rgba(0,0,0,0.2);
			}
		</style>
	</head>
	<body class="is-preload">

		<!-- Page Wrapper -->
			<div id="page-wrapper">

				<!-- Header -->
					<header id="header">
						<h1><a href="{{ url_for('main') }}">DrunkGuard</a></h1>
						<nav id="nav">
							<ul>
								<li class="special">
									<a href="#menu" class="menuToggle"><span>Menu</span></a>
									<div id="menu">
										<ul>
											<li><a href="{{ url_for('main') }}">Home</a></li>
											<li><a href="{{ url_for('detect') }}">Detect</a></li>
											{% if logged_in %}
												<li><a href="{{ url_for('log') }}">Log</a></li>
												<li><a href="#" onclick="logout()">Logout ({{ nickname }})</a></li>
											{% else %}
												<li><a href="{{ url_for('login') }}">Login</a></li>
												<li><a href="{{ url_for('signup') }}">Signup</a></li>
											{% endif %}
										</ul>
									</div>
								</li>
							</ul>
						</nav>
					</header>

				<!-- Main -->
					<article id="main">
						<header>
							<h2>회원가입</h2>
							<p>DrunkGuard에 가입하여 서비스를 이용하세요</p>
						</header>

						<section class="wrapper style5">
							<div class="inner">
								<div class="signup-container">
									<form id="signupForm">
										<div class="form-group">
											<label for="user_id">아이디</label>
											<input type="text" id="user_id" name="user_id" required placeholder="아이디를 입력하세요">
										</div>
										
										<div class="form-group">
											<label for="password">비밀번호</label>
											<input type="password" id="password" name="password" required placeholder="비밀번호를 입력하세요">
										</div>
										
										<div class="form-group">
											<label for="confirm_password">비밀번호 확인</label>
											<input type="password" id="confirm_password" name="confirm_password" required placeholder="비밀번호를 다시 입력하세요">
										</div>
										
										<div class="form-group">
											<label for="email">이메일 (선택사항)</label>
											<input type="email" id="email" name="email" placeholder="이메일을 입력하세요">
										</div>
										
										<ul class="actions">
											<li><button type="submit" class="signup-btn">회원가입</button></li>
										</ul>
									</form>
									
									<div class="login-link">
										<p style="margin-bottom: 0.5rem; color: rgba(255,255,255,0.8); font-size: 0.9em;">이미 계정이 있으신가요?</p>
										<a href="{{ url_for('login') }}">로그인하기</a>
									</div>
								</div>
							</div>
						</section>
					</article>

				<!-- Footer -->
					<footer id="footer">
						<ul class="icons">
							<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
							<li><a href="#" class="icon brands fa-dribbble"><span class="label">Dribbble</span></a></li>
							<li><a href="#" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
						</ul>
						<ul class="copyright">
							<li>&copy; DrunkGuard</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
						</ul>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="{{ url_for('static', filename='assets/js/jquery.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/jquery.scrollex.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/jquery.scrolly.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/browser.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/breakpoints.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/util.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/main.js') }}"></script>
			
			<script>
				// 폼 제출 처리
				document.getElementById('signupForm').addEventListener('submit', function(e) {
					e.preventDefault();
					
					const formData = new FormData(this);
					const user_id = formData.get('user_id');
					const password = formData.get('password');
					const confirm_password = formData.get('confirm_password');
					const email = formData.get('email');
					
					// 비밀번호 확인
					if (password !== confirm_password) {
						alert('비밀번호가 일치하지 않습니다.');
						return;
					}
					
					// 서버로 회원가입 요청
					fetch('/register', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json',
						},
						body: JSON.stringify({
							user_id: user_id,
							password: password,
							email: email
						})
					})
					.then(response => response.json())
					.then(data => {
						if (data.success) {
							alert(data.message);
							window.location.href = "{{ url_for('login') }}";
						} else {
							alert(data.message);
						}
					})
					.catch(error => {
						console.error('Error:', error);
						alert('회원가입 중 오류가 발생했습니다.');
					});
				});
				
				function logout() {
					fetch('/logout', { method: 'POST' })
						.then(response => response.json())
						.then(data => {
							if (data.success) {
								location.reload();
							}
						})
						.catch(error => console.error('Logout error:', error));
				}
			</script>

	</body>
</html>