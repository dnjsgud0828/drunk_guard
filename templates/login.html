<!DOCTYPE HTML>
<!--
	Spectral by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Login - DrunkGuard</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="{{ url_for('static', filename='assets/css/main.css') }}" />
		<noscript><link rel="stylesheet" href="{{ url_for('static', filename='assets/css/noscript.css') }}" /></noscript>
		<style>
			/* 기존 메인 CSS 활용: 최소 커스텀 */
			.login-container { 
				max-width: 28rem; 
				margin: 0 auto; 
				padding: 2rem;
				background: rgba(255, 255, 255, 0.05);
				border-radius: 10px;
				box-shadow: 0 4px 20px rgba(0,0,0,0.3);
				backdrop-filter: blur(10px);
			}
			.form-group { margin-bottom: 1.5rem; }
			.form-group label { 
				display: block; 
				margin-bottom: 0.5rem; 
				font-weight: bold;
				color: #fff;
			}
			.form-group input { 
				width: 100%; 
				padding: 0.75rem;
				border-radius: 5px;
				border: 1px solid rgba(255,255,255,0.2);
				background: rgba(255,255,255,0.1);
				color: #fff;
			}
			.form-group input::placeholder {
				color: rgba(255,255,255,0.6);
			}
			.button.primary { 
				width: 100%; 
				padding: 0.75rem;
				font-size: 1rem;
				border-radius: 5px;
			}
			.kakao-login { 
				width: 100%; 
				background: #FEE500; 
				color: #3c1e1e;
				padding: 0.75rem;
				border-radius: 5px;
				text-decoration: none;
				display: block;
				text-align: center;
				font-weight: bold;
				transition: background 0.3s;
			}
			.kakao-login:hover {
				background: #FDD835;
				color: #3c1e1e;
			}
			.divider { 
				text-align: center; 
				margin: 1.5rem 0; 
				color: #fff;
				position: relative;
			}
			.divider::before {
				content: '';
				position: absolute;
				top: 50%;
				left: 0;
				right: 0;
				height: 1px;
				background: rgba(255,255,255,0.2);
			}
			.divider span {
				background: rgba(0,0,0,0.8);
				padding: 0 1rem;
				position: relative;
			}
			.signup-link {
				text-align: center;
				margin-top: 1.5rem;
			}
			.signup-link a {
				color: #fff;
				text-decoration: none;
				opacity: 0.8;
				transition: opacity 0.3s;
			}
			.signup-link a:hover {
				opacity: 1;
				text-decoration: underline;
			}
		</style>
	</head>
	<body class="is-preload">

		<!-- Page Wrapper -->
			<div id="page-wrapper">

				<!-- Header -->
					<header id="header">
						<h1><a href="{{ url_for('main') }}">DrunkGuard</a></h1>
						<nav id="nav">
							<ul>
								<li class="special">
									<a href="#menu" class="menuToggle"><span>Menu</span></a>
									<div id="menu">
										<ul>
											<li><a href="{{ url_for('main') }}">Home</a></li>
											<li><a href="{{ url_for('detect') }}">Detect</a></li>
											{% if logged_in %}
												<li><a href="{{ url_for('log') }}">Log</a></li>
												<li><a href="#" onclick="logout()">Logout ({{ nickname }})</a></li>
											{% else %}
												<li><a href="{{ url_for('login') }}">Login</a></li>
											{% endif %}
										</ul>
									</div>
								</li>
							</ul>
						</nav>
					</header>

				<!-- Main -->
					<article id="main">
						<header>
							<h2>로그인</h2>
							<p>DrunkGuard에 로그인하여 서비스를 이용하세요</p>
						</header>

						<section class="wrapper style5">
							<div class="inner">
								<div class="login-container">
									<form method="POST" action="{{ url_for('auth.login_post') }}">
										<div class="form-group">
											<label for="user_id">아이디</label>
											<input type="text" id="user_id" name="user_id" required placeholder="아이디를 입력하세요">
										</div>
										
										<div class="form-group">
											<label for="password">비밀번호</label>
											<input type="password" id="password" name="password" required placeholder="비밀번호를 입력하세요">
										</div>
										
									<ul class="actions">
										<li><button type="submit" class="button primary">로그인</button></li>
									</ul>
									</form>
									
									<div class="divider">
										<span>간편로그인</span>
									</div>
									
									<ul class="actions">
										<li><a href="{{ url_for('auth.kakao_login_redirect') }}" class="button kakao-login">카카오톡으로 로그인</a></li>
									</ul>
									
									<div class="signup-link">
										<a href="{{ url_for('signup') }}">회원가입</a>
									</div>
								</div>
							</div>
						</section>
					</article>

				<!-- Footer -->
					<footer id="footer">
						<ul class="icons">
							<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
							<li><a href="#" class="icon brands fa-dribbble"><span class="label">Dribbble</span></a></li>
							<li><a href="#" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
						</ul>
						<ul class="copyright">
							<li>&copy; DrunkGuard</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
						</ul>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="{{ url_for('static', filename='assets/js/jquery.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/jquery.scrollex.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/jquery.scrolly.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/browser.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/breakpoints.min.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/util.js') }}"></script>
			<script src="{{ url_for('static', filename='assets/js/main.js') }}"></script>
			
			<script>
				// 폼 제출 최소 JS
				document.querySelector('form').addEventListener('submit', function(e) {
					e.preventDefault();
					const formData = new FormData(this);
					fetch(this.action, { method: 'POST', body: formData })
						.then(r => r.json())
						.then(d => { if (d.success) location.href = '/detect'; else alert(d.message || '로그인 실패'); })
						.catch(() => alert('로그인 중 오류가 발생했습니다.'));
				});
				
				function logout() {
					fetch('/logout', { method: 'POST' })
						.then(response => response.json())
						.then(data => {
							if (data.success) {
								location.reload();
							}
						})
						.catch(error => console.error('Logout error:', error));
				}
			</script>

	</body>
</html>